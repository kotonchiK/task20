# Тестовое задание на позицию backend разработчика
https://github.com/cracks-koliko/backend-test/tree/main
## Описание

Этот проект предоставляет API для работы с информацией о скинах и балансом пользователей.

## Запуск проекта

Перед запуском не забудьте установить зависимости, например
```sh
yarn install
```

### Проверка целостности кода

Для проверки целостности кода запустите скрипт `watch` из `package.json`

### Запуск сервера

Для запуска сервера используйте следующий скрипт `start` из `package.json`:


## Настройка переменных окружения

Для корректной работы проекта необходимо указать следующие переменные в файле .env:

PORT=3000 --- Порт проекта, предпочтительно 3000

SKINPORT_API_URL=https://api.skinport.com/v1/items

POSTGRESQL_HOST=your_postgresql_host --- Хост PostgreSQL базы данных

POSTGRESQL_DATABASE=your_database_name --- Название PostgreSQL базы данных

POSTGRESQL_PASSWORD=your_database_password --- Пароль для входа в базу данных

POSTGRESQL_PORT=5432 --- Порт PostgreSQL базы данных

POSTGRESQL_USERNAME=your_database_username --- Имя пользователя для входа в базу данных

### Конфигурация проекта

Обратите внимание на файл src/settings.ts. Здесь вы можете задать конфигурацию для проекта.

## Использование API

Для проверки работоспособности с помощью Postman используйте следующие эндпоинты:

### Эндпоинт 1: Получение информации о скинах

Метод: GET

URL: http://localhost:3000/api/skinport/items

Описание: Запрос выполняется около 20-30 секунд, затем приходит массив данных.

Логика сервиса:

1. Получение информации о скинах с tradable = true.
2. Получение информации о скинах с tradable = false.
3. Объединение данных с добавлением полей min_tradable_price и min_untradable_price.
4. Возвращение данных.

Информация сохраняется в кэш.

### Эндпоинт 2: Списание баланса у пользователя

Метод: POST

URL: http://localhost:3000/api/user/deduct-balance

Body: {
"userId": 1,
"amount": 100
}

Логика сервиса:

1. Получение баланса пользователя. 
2. Вычисления. 
3. Обновление баланса пользователя. 
4. Возвращение баланса.

## Контакты

Работу выполнил Антон Долганов

Telegram: @kotooon

Email: kotonchikit@inbox.ru